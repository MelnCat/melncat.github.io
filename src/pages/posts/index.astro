---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import MainContainer from "../../components/MainContainer.astro";

const posts = (await getCollection("posts")).sort((a, b) => +b.data.date - +a.data.date);
---

<Layout title="Posts">
	<MainContainer>
		<h1>Posts</h1>
		<section>
			<ul class="posts">
				{
					posts.map(post => (
						<li class="post">
							<a href={`/posts/${post.data.slug}/`}>
								{post.id}
								<h4 class="title">{post.data.title}</h4>
								<time datetime={post.data.date.toISOString()}>{new Intl.DateTimeFormat().format(new Date(post.data.date))}</time>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</MainContainer>
</Layout>

<style>
	.posts {
		list-style: none;
		padding: 0;
		margin: 1em;
	}
	.post {
		border: 1px solid;
		border-image-source: linear-gradient(160deg, #b9b9b9aa, #b9b9b945);
		border-image-slice: 1;
		background-color: #00000011;
        min-width: 18em;
		&:hover {
			background-color: #00000033;
		}
		&:active {
			background-color: #00000055;
		}
		a {
			display: block;
			padding: 1em;
			width: 100%;
			height: 100%;
			text-decoration: none;
		}
	}
</style>
